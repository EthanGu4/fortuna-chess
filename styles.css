#container
{
  display: none;
}

#classic-gameboard {
  width: 640px;
  height: 640px;
  display: flex;
  flex-wrap: wrap;
  background: #deb887;
  padding: 8px;
  border-radius: 12px;
  box-shadow: 0 0 24px rgba(0, 0, 0, 0.6);
  user-select: none;
}

#fantasy-gameboard {
  position: relative;
  overflow: visible;
  width: 640px;
  height: 640px;
  display: flex;
  flex-wrap: wrap;
  padding: 8px;
  border-radius: 12px;
  user-select: none;
  background: radial-gradient(circle at center, #4e6374, #2a3a46 70%);
  box-shadow: 0 0 40px 4px rgba(0, 191, 255, 0.3);
  animation: glowPulse 4s ease-in-out infinite;
}

@keyframes glowPulse {
  0%, 100% {
    box-shadow: 0 0 40px 4px rgba(0, 191, 255, 0.3);
  }
  50% {
    box-shadow: 0 0 60px 6px rgba(0, 191, 255, 0.5);
  }
}

#player {
  font-weight: 700;
  color: #ffd700;
}

#info-display {
  margin-top: 10px;
  font-style: italic;
  min-height: 24px;
}

#restart-btn {
  margin-top: 20px;
  background: #8b5a2b;
  color: #fff;
  font-weight: bold;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0,0,0,0.3);
  transition: background-color 0.3s ease;
}

#restart-btn:hover {
  background: #a36e40;
}

.hidden {
  display: none !important;
}

body {
  margin: 0;
  height: 100vh;
  background-repeat: no-repeat;
  background-attachment: fixed;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #eee;
  user-select: none;
  position: relative;
  overflow: visible;
}

body.classic-mode {
    background: linear-gradient(135deg, #6b8e23, #2e4d15);
}

body.fantasy-mode {
  /* layered background with nebula-ish gradients */
  background:
    radial-gradient(circle at 20% 30%, rgba(255, 100, 180, 0.3), transparent 70%),
    radial-gradient(circle at 70% 80%, rgba(100, 180, 255, 0.25), transparent 70%),
    radial-gradient(circle at 50% 50%, rgba(180, 100, 255, 0.3), transparent 80%),
    linear-gradient(135deg, #220022, #440044);
  background-blend-mode: screen;
  background-repeat: no-repeat;
  background-size: cover;
  color: #eee;
  position: relative;
  overflow: visible;
}

body.fantasy-mode,
body.fantasy-mode * {
  cursor: url('data:image/svg+xml;charset=utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" height="48" width="48"><g transform="translate(64,0) scale(-1,1)"><text y="28" font-size="32">ðŸª„</text></g></svg>'), auto !important;
}

body.fantasy-mode.cursor-reset,
body.fantasy-mode.cursor-reset * {
  cursor: auto !important;
}

.sparkle {
  position: fixed;
  width: 6px;
  height: 6px;
  pointer-events: none;
  border-radius: 50%;
  opacity: 1;
  z-index: 9999;

  filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.7));
  box-shadow: 0 0 10px 2px currentColor;
  
  animation-name: sparkleFadeMove;
  animation-timing-function: ease-out;
  animation-fill-mode: forwards;
}

@keyframes sparkleFadeMove {
  0% {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(var(--move-x), var(--move-y)) scale(2.5);
  }
}

#fantasy-gameboard .square.light {
  background-color: #6a4ca3;
  background-image:
    radial-gradient(circle at center, #bfa6ff 15%, transparent 80%);
  box-shadow:
    inset 0 0 8px 2px rgba(190, 160, 255, 0.5);
  border: 1.5px solid rgba(255, 255, 255, 0.15);
  transition: background-color 0.4s ease, box-shadow 0.4s ease;
  overflow: visible;
}

#fantasy-gameboard .square.dark {
  background-color: #392e6d;
  background-image:
    radial-gradient(circle at center, #7d6acc 20%, transparent 80%);
  box-shadow:
    inset 0 0 10px 3px rgba(120, 100, 190, 0.4);
  border: 1.5px solid rgba(255, 255, 255, 0.1);
  transition: background-color 0.4s ease, box-shadow 0.4s ease;
  overflow: visible;
}

#fantasy-gameboard .square.water {
  position: relative;
  background: linear-gradient(135deg, #005599 0%, #3399ff 60%, #66b2ff 100%);
  box-shadow:
    inset 0 0 20px 4px rgba(51, 153, 255, 0.7),
    0 0 8px 2px rgba(102, 178, 255, 0.6);
  border-radius: 8px;
  overflow: visible;
  border: 1.5px solid rgba(102, 178, 255, 0.7);
}

@keyframes sparkleLight {
  0%, 100% {
    filter: brightness(1) saturate(1.2);
  }
  50% {
    filter: brightness(1.4) saturate(1.5) hue-rotate(20deg);
  }
}

@keyframes sparkleDark {
  0%, 100% {
    filter: brightness(0.9) saturate(1.2);
  }
  50% {
    filter: brightness(1.3) saturate(1.6) hue-rotate(-20deg);
  }
}

body.fantasy-mode #restart-btn,
body.fantasy-mode #player-display,
body.fantasy-mode #info-display {
  background-color: rgba(0, 0, 0, 0.5);
  color: #f5dfff;
  border: 2px solid #cc99ff;
  padding: 0.5em 1em;
  margin-top: 1em;
  border-radius: 8px;
  box-shadow: 0 0 12px 2px rgba(204, 153, 255, 0.5);
  font-family: 'Cinzel', serif;
}

/* Glowing border animation */
@keyframes border-glow {
  0%, 100% {
    box-shadow: 0 0 30px 8px rgba(240, 230, 140, 0.7);
  }
  50% {
    box-shadow: 0 0 40px 12px rgba(255, 255, 180, 1);
  }
}

@keyframes pulse-glow {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

body.fantasy-mode .stars {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  pointer-events: none;
  z-index: 2;

  width: 1px;
  height: 1px;

  box-shadow:
    30px 50px 2px 1px rgba(255, 255, 255, 0.9),
    150px 90px 3px 1.5px rgba(255, 255, 255, 0.8),
    220px 200px 2px 1px rgba(255, 255, 255, 0.6),
    350px 300px 2px 1px rgba(255, 255, 255, 0.9),
    400px 400px 4px 2px rgba(255, 200, 255, 0.7),
    450px 120px 3px 1.2px rgba(255, 150, 255, 0.6),
    600px 250px 2px 1px rgba(255, 255, 255, 0.8),
    700px 350px 3px 1.5px rgba(255, 255, 255, 0.7),
    800px 150px 4px 1.5px rgba(255, 100, 200, 0.9);
  animation: twinkle 8s ease-in-out infinite;
}

@keyframes twinkle {
  0%, 100% { filter: brightness(100%); }
  50% { filter: brightness(40%); }
}

body.fantasy-mode .shooting-stars {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 3;
}

body.fantasy-mode .shooting-stars::before,
body.fantasy-mode .shooting-stars::after {
  content: '';
  position: absolute;
  top: -10%;
  left: 50%;
  width: 2px;
  height: 80px;
  background: linear-gradient(45deg, white, rgba(255, 255, 255, 0));
  opacity: 0.8;
  transform: rotate(45deg);
  animation: shootStar 6s ease-in-out infinite;
}

body.fantasy-mode .shooting-stars::after {
  animation-delay: 3s;
  left: 30%;
}

@keyframes shootStar {
  0% {
    transform: translateX(0) translateY(0) rotate(45deg);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  50% {
    transform: translateX(-600px) translateY(600px) rotate(45deg);
    opacity: 0;
  }
  100% {
    transform: translateX(-600px) translateY(600px) rotate(45deg);
    opacity: 0;
  }
}

body::before {
  content: '';
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  pointer-events: none;
  background: radial-gradient(circle, rgba(0,0,0,0) 60%, rgba(0,0,0,0.6) 100%);
  z-index: -1;
}

#classic-gameboard .square {
  width: 80px;
  height: 80px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  border-radius: 4px;
  box-sizing: border-box;
  border: 1px solid rgba(0,0,0,0.1);
  transition: background-color 0.3s ease;
  position: relative;
  z-index: 1;
}

#fantasy-gameboard .square {
  width: 53.3333px;
  height: 53.3333px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  border-radius: 4px;
  box-sizing: border-box;
  border: 1px solid rgba(0,0,0,0.1);
  transition: background-color 0.3s ease;
  position: relative;
  z-index: 1;
}

#classic-gameboard .square.light {
  background: linear-gradient(135deg, #f0d9b5, #e6c89f);
  box-shadow: inset 0 0 8px rgba(255,255,255,0.3);
}

#classic-gameboard .square.dark {
  background: linear-gradient(135deg, #b58863, #8b5a2b);
  box-shadow: inset 0 0 8px rgba(0,0,0,0.4);
}

#classic-gameboard .square svg {
    height: 60px;
    width: 60px;
    margin: 10px;
    position: relative;
    z-index: -9;
}

#fantasy-gameboard .square svg {
    height: 37.5px;
    width: 37.5px;
    margin: 7.9166px;
    position: relative;
    z-index: -9;
}

#classic-gameboard .square.last-move-from {
  box-shadow: 0 0 15px 7px rgba(255, 215, 0, 1);
  z-index: 2;
}

#classic-gameboard .square.last-move-to {
  box-shadow: 0 0 15px 7px rgba(255, 215, 0, 1);
  z-index: 2;
}

#fantasy-gameboard .square.last-move-from {
  box-shadow: 0 0 15px 7px rgba(255, 215, 0, 1);
  z-index: 2;
}

#fantasy-gameboard .square.last-move-to {
  box-shadow: 0 0 15px 7px rgba(255, 215, 0, 1);
  z-index: 2;
}

path {
    position: relative;
    z-index: -10;
}

#classic-gameboard .piece {
  position: relative;
  z-index: 9;
}

#classic-gameboard .piece:hover {
  filter: drop-shadow(0 0 4px rgba(255, 215, 0, 0.8)); /* subtle gold glow */
  cursor: grab;
}

#classic-gameboard .piece:active {
  cursor: grabbing;
}

#fantasy-gameboard .fantasy-piece {
  position: relative;
  z-index: 9;
}

#fantasy-gameboard .square.evolved {
  position: relative;
  z-index: 2;
  box-shadow: 
    0 0 14px 5px rgba(255, 255, 130, 0.8),
    0 0 35px 12px rgba(255, 255, 180, 0.5),
    inset 0 0 10px 4px rgba(255, 255, 210, 0.4);
  transition: box-shadow 0.25s ease-in-out;
  animation: glow-pulse 1.8s ease-in-out infinite;
  border-radius: 8px;
}

@keyframes glow-pulse {
  0% {
    box-shadow:
      0 0 12px 4px rgba(255, 255, 120, 0.7),
      0 0 28px 10px rgba(255, 255, 160, 0.4),
      inset 0 0 8px 3px rgba(255, 255, 200, 0.3);
    transform: scale(1);
  }
  50% {
    box-shadow:
      0 0 20px 8px rgba(255, 255, 170, 0.95),
      0 0 45px 18px rgba(255, 255, 210, 0.6),
      inset 0 0 14px 6px rgba(255, 255, 230, 0.5);
    transform: scale(1.050);
  }
  100% {
    box-shadow:
      0 0 14px 5px rgba(255, 255, 130, 0.8),
      0 0 35px 12px rgba(255, 255, 180, 0.5),
      inset 0 0 10px 4px rgba(255, 255, 210, 0.4);
    transform: scale(1);
  }
}

#fantasy-gameboard .fantasy-piece:hover {
  filter: drop-shadow(0 0 8px rgba(255, 215, 0, 1)) drop-shadow(0 0 12px rgba(255, 223, 0, 0.9));
  cursor: grab;
}

#fantasy-gameboard .fantasy-piece:active {
  cursor: grabbing;
}

.captured {
  animation: implode 0.5s ease-in forwards;
  pointer-events: none;
  z-index: 100;
}

@keyframes implode {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(0.2);
    opacity: 0;
  }
}


/* .beige {
    background-color: rgb(110, 110, 98);
}

.brown {
    background-color: rgb(169, 43, 43);
} */

#classic-gameboard .black {
    fill: black;
}

#classic-gameboard .white {
    filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.5));
    opacity: 0.95;
    fill: #eee8d5;
}

#fantasy-gameboard .black {
  fill: #000000; /* jet black */
  filter: drop-shadow(0 0 1.5px rgba(0, 0, 0, 0.3)); /* subtle black glow */
}

#fantasy-gameboard .white {
  fill: #f8f4e3; /* creamy white */
  filter: drop-shadow(0 0 1.5px rgba(255, 255, 240, 0.3)); /* subtle white glow */

}

@keyframes flash-shake-glow {
  0% {
    background-color: rgba(255, 0, 0, 0.6);
    box-shadow: 0 0 12px 4px rgba(255, 0, 0, 0.9);
    transform: translateX(0);
  }
  15% {
    transform: translateX(-5px);
    box-shadow: 0 0 18px 6px rgba(255, 0, 0, 1);
  }
  30% {
    transform: translateX(5px);
    box-shadow: 0 0 18px 6px rgba(255, 0, 0, 1);
  }
  45% {
    transform: translateX(-4px);
    box-shadow: 0 0 14px 5px rgba(255, 0, 0, 0.95);
  }
  60% {
    transform: translateX(4px);
    box-shadow: 0 0 14px 5px rgba(255, 0, 0, 0.95);
  }
  75% {
    transform: translateX(-3px);
    box-shadow: 0 0 12px 4px rgba(255, 0, 0, 0.85);
  }
  90% {
    transform: translateX(3px);
    box-shadow: 0 0 12px 4px rgba(255, 0, 0, 0.85);
  }
  100% {
    box-shadow: none;
    transform: translateX(0);
  }
}

#classic-gameboard .square.invalid-move {
  animation: flash-shake-glow 0.4s ease;
  z-index: 2;
}

#fantasy-gameboard .square.invalid-move {
  animation: flash-shake-glow 0.4s ease;
  z-index: 2;
}

#mode-selection {

  height: 100vh; /* full viewport height */
  width: 100vw; /* full viewport width */

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  
  background: linear-gradient(135deg,
    #4b0082 0%,      /* dark indigo */
    #6a0dad 40%,     /* vibrant purple */
    #9b30ff 70%,     /* bright violet */
    #4b0082 100%);   /* dark indigo */

  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: white;
  padding: 20px;
  box-sizing: border-box;
}

/* Heading */
#mode-selection h2 {
  font-size: 2.5rem;
  margin-bottom: 40px;
  text-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

/* Buttons container */
#mode-selection .mode-btn {
  background-color: rgba(255, 255, 255, 0.15);
  border: 2px solid white;
  border-radius: 10px;
  color: white;
  font-size: 1.25rem;
  font-weight: 600;
  padding: 15px 40px;
  margin: 12px 0;
  cursor: pointer;
  width: 240px;
  text-align: center;
  box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  user-select: none;
}

#mode-selection .mode-btn:hover {
  background-color: white;
  color: #764ba2;
  box-shadow: 0 6px 20px rgba(255, 255, 255, 0.5);
  transform: scale(1.05);
}

#mode-selection .mode-btn:active,
#mode-selection .mode-btn:focus {
  outline: none;
  background-color: #5a3e9e;
  color: white;
  box-shadow: 0 0 12px 3px #5a3e9e;
  transform: scale(0.98);
}

/* ALL ABILITY RELATED CSS */

/* FOR BOMB */
#fantasy-gameboard .explosion-zone {
  animation: explodeFlash 0.5s ease-in-out;
  z-index: 5;
  position: relative;
}

@keyframes explodeFlash {
  0% {
    transform: scale(1.1);
    background: radial-gradient(circle, #fff100, #ff5722, #b71c1c);
    box-shadow: 0 0 20px 10px rgba(255, 100, 0, 0.7);
  }
  50% {
    transform: scale(1.25);
    background: radial-gradient(circle, #ff6347, #ff0000, #000);
  }
  100% {
    transform: scale(1);
    background: radial-gradient(circle, #ff7f50, #8b0000, black);
  }
}

@keyframes cannon-pulse-glow {
  0% {
    filter: drop-shadow(0 0 5px orange);
    transform: translate(-50%, -50%) scale(2.2);
  }
  50% {
    filter: drop-shadow(0 0 20px red);
    transform: translate(-50%, -50%) scale(2.6);
  }
  100% {
    filter: drop-shadow(0 0 5px orange);
    transform: translate(-50%, -50%) scale(2.2);
  }
}

#fantasy-gameboard .explosion-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 80%;
  height: 80%;
  border: 3px solid rgba(255, 100, 0, 0.8);
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0.5);
  animation: ring-expand 0.6s ease-out forwards;
  z-index: 998;
  pointer-events: none;
}

@keyframes ring-expand {
  to {
    transform: translate(-50%, -50%) scale(1.5);
    opacity: 0;
  }
}

/* FOR DRAGON */
#fantasy-gameboard .fire-column {
  position: relative;
  background: linear-gradient(
    45deg,
    #ff4500,
    #ff8c00,
    #ffd700,
    #ff4500,
    #ff8c00
  );
  background-size: 400% 400%;
  animation: fireGradient 3s ease infinite, fireFlicker 0.15s infinite alternate;
  box-shadow:
    0 0 20px 8px #ff6a00,
    0 0 40px 15px #ff4500,
    inset 0 0 30px 10px #ff8c00;
  border-radius: 6px;
  z-index: 10;
  transition: background-color 0.3s ease;
}

/* Smooth moving gradient */
@keyframes fireGradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Quick flicker effect */
@keyframes fireFlicker {
  0% {
    filter: brightness(1);
    box-shadow:
      0 0 20px 8px #ff6a00,
      0 0 40px 15px #ff4500,
      inset 0 0 30px 10px #ff8c00;
  }
  50% {
    filter: brightness(1.3);
    box-shadow:
      0 0 30px 12px #ff8500,
      0 0 50px 18px #ff5000,
      inset 0 0 40px 15px #ffaa00;
  }
  100% {
    filter: brightness(1);
    box-shadow:
      0 0 20px 8px #ff6a00,
      0 0 40px 15px #ff4500,
      inset 0 0 30px 10px #ff8c00;
  }
}

/* FOR FISH */
#fantasy-gameboard .fish-teleport {
  animation: splash 0.6s ease-out;
  background: radial-gradient(circle at center, #00e5ff 40%, #006064 100%) !important;
  position: relative;
  z-index: 10;
}

@keyframes splash {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0px 0px rgba(0, 229, 255, 0.8);
  }
  30% {
    transform: scale(1.15);
    box-shadow: 0 0 30px 15px rgba(0, 229, 255, 0.7);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0px 0px rgba(0, 229, 255, 0);
  }
}

/* FOR FROG */
#fantasy-gameboard .square.swapping-frog {
  position: relative;
  z-index: 2;
  border-radius: 12px;
  animation: pulse-glow 1.2s infinite ease-in-out;
  filter: drop-shadow(0 0 6px limegreen) drop-shadow(0 0 12px limegreen);
}

@keyframes pulse-glow {
  0% {
    box-shadow: 0 0 4px 2px limegreen;
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 16px 8px limegreen;
    transform: scale(1.05);
  }
  100% {
    box-shadow: 0 0 4px 2px limegreen;
    transform: scale(1);
  }
}

/* FOR PIRATE */
#fantasy-gameboard .sweep-strike {
  position: relative;
  overflow: hidden;
}

#fantasy-gameboard .sweep-strike::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(135deg, transparent 40%, rgba(255, 255, 255, 0.8) 50%, transparent 60%);
  transform: rotate(0deg) scale(0.5);
  animation: sword-sweep 0.35s ease-out forwards;
  pointer-events: none;
}

@keyframes sword-sweep {
  0% {
    transform: rotate(0deg) scale(0.5);
    opacity: 1;
  }
  100% {
    transform: rotate(90deg) scale(1);
    opacity: 0;
  }
}

/* FOR PIRATE KING */
#fantasy-gameboard .barrage-target {
  animation: explode 0.5s ease-out;
  background: radial-gradient(circle, #ff3d00 0%, #ff9800 60%, transparent 100%) !important;
  box-shadow: 0 0 25px 15px rgba(255, 61, 0, 0.7);
  position: relative;
  z-index: 20;
}

@keyframes explode {
  0% {
    transform: scale(1);
    opacity: 1;
    filter: brightness(1);
  }
  30% {
    transform: scale(1.3);
    opacity: 1;
    filter: brightness(3);
    box-shadow: 0 0 40px 20px rgba(255, 200, 0, 0.9);
  }
  60% {
    transform: scale(0.9);
    opacity: 0.8;
    filter: brightness(1.5);
  }
  100% {
    transform: scale(1);
    opacity: 1;
    box-shadow: none;
    filter: brightness(1);
  }
}

@keyframes screenShake {
  0%, 100% { transform: translate(0, 0); }
  25% { transform: translate(-5px, 2px); }
  50% { transform: translate(5px, -2px); }
  75% { transform: translate(-3px, 3px); }
}

.cannonball {
  position: absolute;
  top: -50px;
  left: 50%;
  transform: translateX(-50%);
  width: 20px;
  height: 20px;
  background: radial-gradient(circle, #333 0%, #111 100%);
  border-radius: 50%;
  z-index: 999;
  animation: cannonballDrop 0.6s ease-out forwards;
  pointer-events: none;
}

@keyframes cannonballDrop {
  0% {
    top: -50px;
    transform: translateX(-50%) scale(1);
    opacity: 1;
  }
  80% {
    top: 40%;
    transform: translateX(-50%) scale(1.3);
  }
  100% {
    top: 50%;
    transform: translateX(-50%) scale(0.5);
    opacity: 0;
  }
}

body.shake {
  animation: screenShake 0.4s;
}

/* FOR WHALE */
.splash-zone {
  animation: splashWave 0.4s ease-out;
  background: radial-gradient(circle, #00cfff 0%, #006b8f 70%, transparent 100%) !important;
  box-shadow: 0 0 20px 10px rgba(0, 191, 255, 0.6);
  position: relative;
  z-index: 10;
}

@keyframes splashWave {
  0% {
    transform: scale(1);
    opacity: 0.9;
    filter: brightness(2);
  }
  50% {
    transform: scale(1.2);
    filter: brightness(3);
  }
  100% {
    transform: scale(1);
    opacity: 1;
    filter: brightness(1);
  }
}